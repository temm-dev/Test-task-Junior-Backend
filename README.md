# Test Assignment for Junior Backend Developer

## Задача
Разработать сервис на **Django + DRF**, который синхронизирует контент из Instagram в локальную базу данных и позволяет управлять комментариями через API.

## Стек
* **Python 3.10+**, **Django**, **DRF**.
* **PostgreSQL**.
* **Docker** & **Docker Compose**.

---

## Подготовка (API Access)
Для работы с API не нужно реализовывать механизм OAuth-авторизации. Достаточно:
1. Создать приложение в [App Dashboard](https://developers.facebook.com/apps/).
2. Получить временный Access Token, следуя шагам в [официальной документации](https://developers.facebook.com/docs/instagram-platform/instagram-api-with-instagram-login/get-started).
3. Использовать полученный токен в коде через переменные окружения.

---

## Бизнес-требования

### 1. Синхронизация (Instagram -> DB)
**Эндпоинт:** `POST /api/v1/sync/`
* Сервис должен выкачать **все** медиа-объекты пользователя из Instagram Graph API.
* Реализовать автоматический обход всех страниц пагинации (используя поле `next` в ответе API), пока не будет получен полный список постов.
* Данные сохраняются в локальную БД. Если пост уже был загружен ранее — обновить его поля актуальными данными из API (**Upsert логика**).

### 2. Список постов
**Эндпоинт:** `GET /api/v1/posts/`
* Вывод списка всех сохраненных постов из локальной базы данных.
* Обязательна пагинация средствами DRF (`CursorPagination`).

### 3. Комментирование
**Эндпоинт:** `POST /api/v1/posts/{id}/comment/`
* `{id}` в URL — это **внутренний Primary Key** поста в нашей базе данных.
* Система должна отправить текст комментария в Instagram API для соответствующего поста.
* В случае успеха — сохранить комментарий в локальную БД со связью к посту и вернуть сериализованные данные созданного комментария (включая его новый внутренний ID).

---

## Тестирование
Необходимо написать как минимум один интеграционный тест для эндпоинта создания комментария:
* Тест должен проверять создание записи в БД и корректность ответа API при успешном запросе.
* Тест должен проверять обработку ошибки, если пост с указанным `{id}` отсутствует в базе.
* Тест должен проверять обработку ошибки, если указанный пост существует в базе, но его нет уже в Instagram.
* **Требование:** Запрещено выполнять реальные HTTP-запросы к Instagram API во время тестов. Используйте инструменты мокирования (`unittest.mock`, `requests-mock` или аналоги) для имитации ответов от внешнего сервиса.

---

## Технические условия
* **Docker:** Весь проект (приложение + БД) должен подниматься одной командой: `docker-compose up --build`.
* **Архитектура:** Ожидается разделение ответственности. Логика запросов к внешнему API должна быть вынесена в отдельный слой (Services/Clients), а не находиться внутри Views.
* **Качество кода:** * Соблюдение PEP8.
    * Использование **Type Hinting** (аннотации типов).
    * Наличие кратких комментариев (**Docstrings**) к ключевым бизнес-методам (логика синхронизации, интеграция с API).
    * Обработка ошибок API.

---

## Что мы оцениваем
1. Умение работать с внешней документацией и API.
2. Архитектурные решения при проектировании моделей и слоев логики.
3. Владение инструментами DRF (сериализаторы, пагинация, тесты).
4. Навыки контейнеризации приложения.

---

## Порядок сдачи задачи
1. Сделайте **Fork** данного репозитория.
2. Опубликуйте решение в вашем публичном репозитории.
3. Добавьте в ваш `README.md` инструкцию по настройке и запуску проекта.
